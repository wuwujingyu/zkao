var gulp=require("gulp"),htmlmin=require("gulp-htmlmin"),uglify=require("gulp-uglify"),minify=require("gulp-minify-css"),webserver=require("gulp-webserver"),url=require("url"),fs=require("fs");gulp.task("webserver",function(){gulp.src(".index.html").pipe(webserver({port:9999,host:"localhost",middleware:function(e,i,r){var l=url.parse(e.url);i.setHeader("Access-Control-Allow-Origin","*"),"GET"===e.method&&"/getdata"===l.pathname&&i.end(fs.readFileSync("data.json"))}}))}),gulp.task("htmlmin",function(){gulp.src("./*.html").pipe(htmlmin({removeComments:!0,collapseBooleanAttributes:!0,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,minifyCSS:!0,minifyJS:!0})).pipe(gulp.dest("bulid"))}),gulp.task("yscss",function(){gulp.src("./*.css").pipe(minify()).pipe(gulp.dest("bulid"))}),gulp.task("ysjs",function(){gulp.src("./*.js").pipe(uglify()).pipe(gulp.dest("bulid"))}),gulp.task("default",["webserver","htmlmin","yscss","ysjs"]);